{% extends 'base.html' %}

{% block title %}æŠ•è¯‰ - LMJï¼ˆé•¿å¾ï¼‰é›†å›¢ç®¡ç†å¹³å°{% endblock %}

{% block content %}
<div class="container-fluid">
    <h2 class="mb-4">æŠ•è¯‰</h2>
    
    <!-- æäº¤æŠ•è¯‰è¡¨å• -->
    <div class="card">
        <div class="card-body">
            <h3 class="card-title mb-4">æäº¤æŠ•è¯‰</h3>
            {% if current_user.is_authenticated %}
                <form method="POST">
                    <div class="mb-4">
                        <label for="title" class="form-label">æŠ•è¯‰æ ‡é¢˜</label>
                        <input type="text" class="form-control" id="title" name="title" required>
                    </div>
                    <div class="mb-4">
                        <label for="complaint_type" class="form-label">æŠ•è¯‰å¯¹è±¡ç±»å‹</label>
                        <select class="form-control" id="complaint_type" name="complaint_type" onchange="showTargetOptions()" required>
                            <option value="">è¯·é€‰æ‹©æŠ•è¯‰å¯¹è±¡ç±»å‹</option>
                            <option value="group_member">é›†å›¢å†…éƒ¨æˆå‘˜</option>
                            <option value="airline_chairman">èˆªå¸è‘£äº‹é•¿</option>
                            <option value="airline_member">èˆªå¸æˆå‘˜</option>
                        </select>
                    </div>
                    
                    <!-- é›†å›¢å†…éƒ¨æˆå‘˜é€‰é¡¹ -->
                    <div id="group_member_options" class="mb-4" style="display: none;">
                        <label for="group_member" class="form-label">é€‰æ‹©é›†å›¢å†…éƒ¨æˆå‘˜</label>
                        <select class="form-control" id="group_member" name="group_member">
                            <option value="">è¯·é€‰æ‹©é›†å›¢å†…éƒ¨æˆå‘˜</option>
                            <option value="æ— å(2122927071)">æ— åï¼ˆ2122927071ï¼‰æœ€é«˜è´Ÿè´£äºº</option>
                            <option value="çº¢è‹•ç¨€é¥­(3088276955)">çº¢è‹•ç¨€é¥­ï¼ˆ3088276955ï¼‰é›†å›¢è‘£äº‹é•¿</option>
                            <option value="é€—æ¯”(3645592257)">é€—æ¯”ï¼ˆ3645592257ï¼‰é›†å›¢å‰¯è‘£äº‹é•¿</option>
                            <option value="â„’.ğŸŒ€(2270623277)">â„’.ğŸŒ€ï¼ˆ2270623277ï¼‰CEO</option>
                            <option value="å¢¨å¿å°˜(2456669766)">å¢¨å¿å°˜ï¼ˆ2456669766ï¼‰CTO</option>
                        </select>
                    </div>
                    
                    <!-- èˆªå¸è‘£äº‹é•¿é€‰é¡¹ -->
                    <div id="airline_chairman_options" class="mb-4" style="display: none;">
                        <label for="airline_chairman" class="form-label">é€‰æ‹©èˆªå¸è‘£äº‹é•¿</label>
                        <select class="form-control" id="airline_chairman" name="airline_chairman">
                            <option value="">è¯·é€‰æ‹©èˆªå¸è‘£äº‹é•¿</option>
                            <option value="è‰¾(3838925451)">è‰¾ï¼ˆ3838925451ï¼‰åŒ—æ–¹èˆªç©ºè‘£äº‹é•¿</option>
                            <option value="çˆ±çªæ˜¯æˆ‘çš„äº‹(1507290776)">çˆ±çªæ˜¯æˆ‘çš„äº‹ï¼ˆ1507290776ï¼‰å¦é—¨èˆªç©ºè‘£äº‹é•¿</option>
                            <option value="è®¸å¦‚æ¸…(1626618258)">è®¸å¦‚æ¸…ï¼ˆ1626618258ï¼‰ä¸œæ–¹èˆªç©ºè‘£äº‹é•¿</option>
                            <option value=".(1461731945)"> .ï¼ˆ1461731945ï¼‰ä¸Šæµ·èˆªç©ºè‘£äº‹é•¿</option>
                        </select>
                    </div>
                    
                    <!-- èˆªå¸æˆå‘˜è¾“å…¥ -->
                    <div id="airline_member_options" class="mb-4" style="display: none;">
                        <label class="form-label">èˆªå¸æˆå‘˜ä¿¡æ¯</label>
                        <div class="mb-3">
                            <label for="airline_member_name" class="form-label">å§“å</label>
                            <input type="text" class="form-control" id="airline_member_name" name="airline_member_name" placeholder="è¯·è¾“å…¥èˆªå¸æˆå‘˜å§“å">
                        </div>
                        <div>
                            <label for="airline_member_qq" class="form-label">QQå·</label>
                            <input type="text" class="form-control" id="airline_member_qq" name="airline_member_qq" placeholder="è¯·è¾“å…¥èˆªå¸æˆå‘˜QQå·">
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label for="content" class="form-label">æŠ•è¯‰å†…å®¹</label>
                        <textarea class="form-control" id="content" name="content" rows="5" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">æäº¤æŠ•è¯‰</button>
                </form>
            {% else %}
                <div class="alert alert-warning">
                    <i class="fas fa-info-circle"></i> è¯·å…ˆ<a href="{{ url_for('login') }}">ç™»å½•</a>åå†æäº¤æŠ•è¯‰ã€‚
                </div>
            {% endif %}
        </div>
    </div>
</div>

<script>
function showTargetOptions() {
    // éšè—æ‰€æœ‰é€‰é¡¹
    document.getElementById('group_member_options').style.display = 'none';
    document.getElementById('airline_chairman_options').style.display = 'none';
    document.getElementById('airline_member_options').style.display = 'none';
    
    // è·å–é€‰ä¸­çš„æŠ•è¯‰å¯¹è±¡ç±»å‹
    var complaintType = document.getElementById('complaint_type').value;
    
    // æ ¹æ®é€‰æ‹©æ˜¾ç¤ºå¯¹åº”çš„é€‰é¡¹
    if (complaintType === 'group_member') {
        document.getElementById('group_member_options').style.display = 'block';
    } else if (complaintType === 'airline_chairman') {
        document.getElementById('airline_chairman_options').style.display = 'block';
    } else if (complaintType === 'airline_member') {
        document.getElementById('airline_member_options').style.display = 'block';
    }
}
</script>
{% endblock %}